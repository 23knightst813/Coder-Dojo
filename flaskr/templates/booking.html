{% extends "base.html" %}

{% block content %}
<h1>Make a Booking</h1>
<form method="post">
    <label for="participant">Select Participant:</label>
    <select name="participant_id" id="participant" onchange="toggleNewParticipantForm(this.value)">
        <option value="" disabled selected>Select a participant</option>
        {% for participant in participants %}
        <option value="{{ participant['participant_id'] }}">{{ participant['name'] }}</option>
        {% endfor %}
        <option value="new">Create New Participant</option>
    </select>

    <div id="newParticipantForm" style="display: none;">
        <h3>New Participant Information</h3>
        <label for="new_participant_name">Name:</label>
        <input type="text" name="new_participant_name" id="new_participant_name" required>

        <label for="new_participant_age">Age:</label>
        <input type="number" name="new_participant_age" id="new_participant_age" required>
    </div>

    <h3>Select Preferred Activities:</h3>
    <label for="activity1">Activity 1:</label>
    <select name="activity1" id="activity1" required>
        <option value="" disabled selected>Select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity['activity_id'] }}">{{ activity['activity_name'] }}</option>
        {% endfor %}
    </select>

    <label for="activity2">Activity 2:</label>
    <select name="activity2" id="activity2" required>
        <option value="" disabled selected>Select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity['activity_id'] }}">{{ activity['activity_name'] }}</option>
        {% endfor %}
    </select>

    <label for="activity3">Activity 3:</label>
    <select name="activity3" id="activity3" required>
        <option value="" disabled selected>Select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity['activity_id'] }}">{{ activity['activity_name'] }}</option>
        {% endfor %}
    </select>

    <button type="submit">Submit Booking</button>
</form>

<script>
function toggleNewParticipantForm(value) {
    const form = document.getElementById('newParticipantForm');
    if (value === 'new') {
        form.style.display = 'block';
    } else {
        form.style.display = 'none';
    }
}
</script>
{% endblock %}