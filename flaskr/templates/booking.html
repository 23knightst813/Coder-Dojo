{% extends "base.html" %}

{% block content %}

<nav>
    <a href="/about" class="navbar-btn">about</a>
    <a href="/" class="navbar-btn">home</a>
    <a href="/login" class="navbar-btn">login</a>
</nav>

<div class="head">
    <h1>make a booking</h1>
    <div class="head-text"></div>
        <p>saturday</p>
        <p>10:00 - 18:00</p>
    </div>
</div>

<form method="post" class="form-container" >
    <!-- Participant Dropdown -->
    <label for="participant">select participant:</label>
    <select name="participant_id" id="participant" onchange="toggleNewParticipantForm(this.value)">
        <option value="" disabled selected>select a participant</option>
        {% for participant in participants %}
        <option value="{{ participant[0] }}">{{ participant[1] }}</option>
        {% endfor %}
        <option value="new">create new participant</option>
    </select>

    <!-- New Participant Form -->
    <div id="newParticipantForm" style="display: none;">
        <h3>new participant information</h3>
        <label for="new_participant_name">Name:</label>
        <input type="text" name="new_participant_name" id="new_participant_name" required>

        <label for="new_participant_age">Age:</label>
        <input type="number" name="new_participant_age" id="new_participant_age" required>
    </div>

    <!-- Activity Dropdowns -->
    <h3>select preferred activities:</h3>
    <br />

    <label for="activity1">activity 1:</label>
    <select name="activity1" id="activity1" required>
        <option value="" disabled selected>select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity[0] }}">{{ activity[1] }}</option>
        {% endfor %}
    </select>
    <br>
    <br>
    <label for="activity2">activity 2:</label>
    <select name="activity2" id="activity2" required>
        <option value="" disabled selected>select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity[0] }}">{{ activity[1] }}</option>
        {% endfor %}
    </select>
    <br>
    <br>
    <label for="activity3">activity 3:</label>
    <select name="activity3" id="activity3" required>
        <option value="" disabled selected>select an activity</option>
        {% for activity in activities %}
        <option value="{{ activity[0] }}">{{ activity[1] }}</option>
        {% endfor %}
    </select>

    <br>
    <br>
    <br>
    <button type="submit" class="btn">submit booking</button>
</form>

<script>
    function toggleNewParticipantForm(value) {
        const form = document.getElementById('newParticipantForm');
        const nameInput = document.getElementById('new_participant_name');
        const ageInput = document.getElementById('new_participant_age');

        if (value === 'new') {
            form.style.display = 'block';
            nameInput.required = true;
            ageInput.required = true;
        } else {
            form.style.display = 'none';
            nameInput.required = false;
            ageInput.required = false;
        }
    }
</script>
{% endblock %}